<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" 
        integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto Slab">
    <script src="svg-pan-zoom.min.js"></script>
    <title>SVG PSE</title>
</head>
<style>
    body {
        font-family: "Roboto Slab";
    }
</style>
<body>
<div id="globalView" style="width: 100%; height:700"> 
<svg id="PSE" class="box" height="500" width="720" style="background-color:lightgrey; width:100%; height:600px">
    <svg id="Act" class="actinide" x="80" y="240" width="40" height="40" onclick="returnMsg(this.id)">
        <rect width="40" height="40" fill="olive" stroke='blue' stroke-width='1' stroke-dasharray='6.444444,6.444444'> 
        </rect>
        <text fill="#000" font-size="10" font-family="Roboto Slab" x="4" y="12">89-103</text>
        <text fill="#000" font-size="20" font-family="Roboto Slab" x="50%" y="30" text-anchor="middle" 
            alignment-baseline="central">Act
        </text>
    </svg>
    <svg id="Lan" class="lanthanide" x="80" y="200" width="40" height="40" onclick="returnMsg(this.id)">
        <rect width="40" height="40" fill="maroon" stroke='black' stroke-width='0.3'></rect>
        <text fill="#000" font-size="10" font-family="Roboto Slab" x="4" y="12">57-71</text>
        <text fill="#000" font-size="20" font-family="Roboto Slab" x="50%" y="30" text-anchor="middle" 
            alignment-baseline="central">Lan
        </text>
    </svg>
    <svg x="210" y="0" width="300" height="40">
        <text fill="#000" font-size="20" font-family="Roboto Slab" x="50%" y="23" text-anchor="middle" 
            alignment-baseline="central">Periodic System of Elements
        </text>
    </svg>
    <svg id="Actinide" class="box" style="display: none" y="390" x="0" height="40" width="720"></svg>
    <svg id="Lanthanide" class="box" style="display:none" y="350" height="40" width="720"></svg>
    <svg id="hoverlegend" class="box" x="100" y="40" height="80" width="720">
        <svg id="nonmetal" class="legend" x="0" y="0" height="10" width="720">
            <rect x="0" y="0" width="20" height="10" fill="lightcoral"></rect>
            <text x="25" y="10" fill="#000" font-size="10">nonmetal</text>
        </svg>
        <svg id="metal" class="legend" x="0" y="13" height="10" width="720">
            <rect x="0" y="0" width="20" height="10" fill="mediumorchid"></rect>
            <text x="25" y="10" fill="#000" font-size="10">metal</text>
        </svg>
        <svg id="metalloid" class="legend" x="0" y="26" height="10" width="720">
            <rect x="0" y="0" width="20" height="10" fill="lightgreen"></rect>
            <text x="25" y="10" fill="#000" font-size="10">metalloid</text>
        </svg>
        <svg id="gas" class="legend" x="0" y="39" height="16" width="720">
            <rect x="0" y="0" width="20" height="10" fill="lightcoral"></rect>
            <text x="25" y="10" fill="#000" font-size="10">gas</text>
        </svg>
        <svg id="transition metal" class="legend" x="0" y="53" height="10" width="720">
            <rect x="0" y="0" width="20" height="10" fill="lightblue"></rect>
            <text x="25" y="10" fill="#000" font-size="10">transition metal</text>
        </svg>
        <svg id="lanthanide" class="legend" x="130" y="0" height="10" width="720">
            <rect x="0" y="0" width="20" height="10" fill="maroon"></rect>
            <text x="25" y="10" fill="#000" font-size="10">lanthanide</text>
        </svg>
        <svg id="actinide" class="legend" x="130" y="13" height="10" width="720">
            <rect x="0" y="0" width="20" height="10" fill="olive"></rect>
            <text x="25" y="10" fill="#000" font-size="10">actinide</text>
        </svg>
    </svg>
</svg>

</div>
    <div id="details" style="display:none; background-color:rgba(0,0,0,0.4); z-index:1; left:0; top:0; width : 100%; 
        height : 100%; position : fixed">
        <div id="popUpContent" style="margin: 5% auto; padding: 20px; width: 80%">
            <h1 id="close" style="position: absolute; top:0px; right:20px; color: gainsboro; font-size: 30px"
            onmouseover="hover()" onmouseout="out()" onclick="closed()"> ✕</h1>
            <h2 id="name"></h2>
            <h3><i class="fas fa-flask"></i> Chemical Information</h3>
            <p id="atomicMass" style = "font-family: Roboto Slab"></p>
            <p id="density"></p>
            <p id="melting"></p>
            <p id="boiling"></p>
            <h3><i class="fas fa-info-circle"></i> Further Information</h3>
            <p id="discovered"></p>
            <p id="named"></p>
            <p id="summary"></p>
    </div>
</div>
<script>
    for (a of  $(".box")[3].children) {
        a.addEventListener ('mouseover', mouseOver);
        a.addEventListener ('mouseout', mouseOut);
    }
    var fills = {"Gas" : "red", "Solid" : "black", "Liquid" : "yellow", "metalloid" : "lightgreen", 
        "nonmetal" : "lightcoral", "metal" : "mediumorchid", "transition metal" : "lightblue",
        "gas" : "lightcoral", "actinide" : "olive", "lanthanide" : "maroon"};
    var categories = ["nonmetal", "metal", "metalloid", "transition metal", "actinide", 
        "lanthanide", "gas"];
    var atoms;
    var panZoom;
    $.getJSON("PeriodicTableJSON.json", function(data) {
        atoms = data;
        initialize();
    })
    
    function initialize() {
        var PSE = document.getElementById("PSE");
        var Act = document.getElementById("Actinide");
        var Lat = document.getElementById("Lanthanide");
        for (i of atoms.elements) {
            if (i.category == "lanthanide") {
                var append = 
                "<svg class='lanthanide' id='"+i.number+"'x='"+((i.xpos-1)*40)+"'y='0' width='40' height='40' 
                    onclick='returnMsg(this.id)'>
                    <rect stroke='black' stroke-width='0.3' width='40' height='40' fill='"+fills[i.category]+"'></rect>
                    <text fill='#000' font-size='10' font-family='Roboto Slab' x='4' y='12'>"+i.number+"</text>
                    <text fill='"+fills[i.phase]+"' font-size='20' font-family='Roboto Slab' x='50%' y='30' 
                    text-anchor='middle' alignment-baseline='central'>"+i.symbol+"</text>
                </svg>"; 
                $("#Lanthanide").append(append);
            } else if (i.category=="actinide") {
                var append = 
                "<svg class='actinide' id='"+i.number+"'x='"+((i.xpos-1)*40)+"'y='0' width='40' height='40' 
                    onclick='returnMsg(this.id)'>
                    <rect stroke='blue' stroke-width='1' stroke-dasharray='6.444444,6.444444' 
                        width='40' height='40' fill='"+fills[i.category]+"'></rect>
                    <text fill='#000' font-size='10' font-family='Roboto Slab' x='4' y='12'>"+i.number+"</text>
                    <text fill='"+fills[i.phase]+"' font-size='20' font-family='Roboto Slab' x='50%' y='30' 
                    text-anchor='middle' alignment-baseline='central'>"+i.symbol+"</text>
                </svg>"; 
                $("#Actinide").append(append);
            } else {
                if (!i.radioactive) {
                    var append =
                   "<svg class='"+i.category+"' id='"+i.number+"'x='"+((i.xpos-1)*40)+"'y='"+((i.ypos-1)*40)+"' 
                        width='40' height='40' onclick='returnMsg(this.id)'>
                        <rect stroke='black' stroke-width='0.3' width='40' height='40' fill='"+fills[i.category]+"'></rect>
                        <text fill='#000' font-size='10' font-family='Roboto Slab' x='4' y='12'>"+i.number+"</text>
                        <text fill='"+fills[i.phase]+"' font-size='20' font-family='Roboto Slab' x='50%' y='30' 
                        text-anchor='middle' alignment-baseline='central'>"+i.symbol+"</text>
                    </svg>"; 
                } else {
                    var append =
                     "<svg class='"+i.category+"' id='"+i.number+"'x='"+((i.xpos-1)*40)+"'y='"+((i.ypos-1)*40)+"' 
                        width='40' height='40' onclick='returnMsg(this.id)'>
                        <rect stroke='blue' stroke-width='1' stroke-dasharray='6.444444,6.444444' 
                        width='40' height='40' fill='"+fills[i.category]+"'></rect>
                        <text fill='#000' font-size='10' font-family='Roboto Slab' x='4' y='12'>"+i.number+"</text>
                        <text fill='"+fills[i.phase]+"' font-size='20' font-family='Roboto Slab' x='50%' y='30' 
                        text-anchor='middle' alignment-baseline='central'>"+i.symbol+"</text>
                    </svg>"; 
                }
                $("#PSE").append(append);
            }
            if (i.symbol == "Uue") {
                panZoom = svgPanZoom('#PSE',{fit:true, center:false});
            }
        }
    }
    
    function hover(){
        $("#close")[0].style.color="dimgray";
    }
    function mouseOver() {
        for (i of categories) {
            var newOpacity;
            if (i == this.id) {
                newOpacity = 1;
            } else { 
                newOpacity = 0.5;
            }
            var elementsOfClass = document.getElementsByClassName(i); 
            for (element of elementsOfClass) {
                k.style.opacity = newOpacity;
            }
        }
    }
    
    function mouseOut() {
        for (i of categories) {
            var b = document.getElementsByClassName(i); 
            for (k of b) {
                k.style.opacity = 1;
            }
        }
    }
    
    function out() {
        $("#close")[0].style.color="gainsboro";
    }
    
    function closed() {
        $("#details")[0].style.display="none";
        setTimeout(function() {
            panZoom.reset()
            zoomOut();
        }, 1000);
        function zoomOut(){
            if ($("#Actinide")[0].style.display == "block" || $("#Lanthanide")[0].style.display == "block"){
                panZoom.zoomBy(0.73);
                panZoom.panBy({x:0, y:-80});
            }
        }
    }
    
    function returnMsg(name) {
        if (name == "Act") {
            $("#Actinide")[0].style = "display: block";
            panZoom.reset()
            panZoom.zoomBy(0.73);
            panZoom.panBy({x:0, y:-80})
        } else if (name == "Lan") {
            $("#Lanthanide")[0].style = "display: block";
            panZoom.reset();
            panZoom.zoomBy(0.73);
            panZoom.panBy({x : 0, y : -80});
        } else {
            var x = atoms.elements[parseInt(name)-1];
            panZoom.reset();
        if (x.category == "actinide" || x.category == "lanthanide") {
            panZoom.pan({x:(669-((x.xpos-1)*40+20)*1.875), y:(300-((x.ypos-1)*40+55)*1.875)});
        } else {
            panZoom.pan({x:(669-((x.xpos-1)*40+20)*1.875), y:(300-((x.ypos-1)*40+20)*1.875)});
        }
        panZoom.zoom(5.0);
        $("#details")[0].style.display = "block";
        $("#name")[0].textContent = x.name;
        if (x.radioactive) {
            $("#name")[0].textContent += " ☢";
        }
        $("#name")[0].style.color = fills[x.phase];
        $("#popUpContent")[0].style.backgroundColor = fills[x.category];
        $("#density")[0].textContent = "Density [in g/cm³]: " + x.density;
        $("#melting")[0].textContent = "Melting temperature [in °C]: "+ x.melt;
        $("#boiling")[0].textContent = "Boiling temperature [in °C]: "+ x.boil;
        $("#atomicMass")[0].textContent = "Atomic Mass [in u]: "+ x.atomic_mass;
        $("#named")[0].textContent = "Named by: " + x.named_by;
        $("#discovered")[0].textContent = "Discovered in/by: "+ x.discovered_by;
        $("#summary")[0].textContent = x.summary;
        $("#summary").append("<br><a id='link'><i class='fas fa-arrow-circle-right'></i> Click here for more facts</a>");
        $("#link")[0].href = x.source;
        }
    }
</script>
</body>
</html>
